---
title: 关于移动端浮层的问题
date: 2018-02-11 19:17:19
tags:
---
  移动端的项目中，我们经常会遇到有弹窗、浮层的情况。为了良好的用户体验，我们并不希望浮层出现的时候，后面的页面也跟着滚动。

  第一反应肯定是阻止事件的默认行为，preventDefault（），但是当浮层自己内部也有滚动的时候此时prventDefault根本不起作用。当滑动到浮层的底部的时候，继续滑动，页面也会随之滑动。

看如下代码：
```
// 显示弹窗
showPop.addEventListener('click',function (e) {
	pop.style.display = 'block'
	// 不起作用
	e.preventDefault()
	// 起作用
	document.querySelector('body').style.overflow = 'hidden'
	document.querySelector('body').style.position = 'fixed'
})

```
也就是说当浮层出现的时候，我们设置body的样式超出部分隐藏，当浮层关闭的时候，再把body的样式恢复。
```
// 关闭弹窗
closePop.addEventListener('click', function () {
	pop.style.display = 'none'
	document.querySelector('body').style.overflow = 'scroll'
	document.querySelector('body').style.position = 'relative'
})
```
这就实现了当浮层滚到边缘部分的时候页面也不会随之滚动的效果啦。
[demo](https://github.com/chuo0817/pop)
